<launch>
  <arg name="robot_ip" default="192.168.1.212" />
  <arg name="report_type" default="normal" />
  <arg name="sim" default="false" doc="turn on/off drivers" />
  <!-- TODO -->
  <arg name="velocity_control" default="false" />
  <arg name="trajectory_controllers" default="false" />

  <!-- common: bring up node to enable real xArm control -->
  <group unless="$(arg sim)">

    <param name="xarm_robot_ip" type="str" value="$(arg robot_ip)" />
    <param name="xarm_report_type" type="str" value="$(arg report_type)" />
    <rosparam file="$(find as_xarm)/config/xarm6_params.yaml" command="load" />
    <node name="xarm_driver" pkg="xarm_api" type="xarm_driver_node" output="screen" />   

  </group>

  <group if="$(arg trajectory_controllers)">    
    <rosparam file="$(find as_xarm)/config/xarm6_traj_controller.yaml" command="load" />
    <rosparam file="$(find as_xarm)/config/joint_limits.yaml" command="load" />
    <node name="traj_controller_spawner" pkg="controller_manager" type="spawner" respawn="false" output="screen" args="xarm6_traj_controller" />
  </group>
  
</launch>