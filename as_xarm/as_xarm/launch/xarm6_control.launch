<launch>
    <arg name="velocity_control" default="false"/>    
  
    <!-- Load joint controller configurations from YAML file to parameter server -->
    <!-- Load trajectory controller for xArm by default -->
    <rosparam file="$(find as_xarm)/config/xarm6_traj_controller.yaml" command="load"/>
    <arg name="xarm_traj_controller" value="$(eval 'xarm6_traj_controller_velocity' if arg('velocity_control') else 'xarm6_traj_controller')" />
    <node name="traj_controller_spawner"
      pkg="controller_manager"
      type="controller_manager"
      respawn="false"
      output="screen"      
      args="spawn $(arg xarm_traj_controller)"/>
  
  </launch>
